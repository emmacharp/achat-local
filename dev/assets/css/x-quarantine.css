.chain div:not([class])+.unknown-link hr {
	display: none; /* SALE — Faudrait l'enlever dans le XSLT */
}

main>section {
/* Cause un bug au défilement si fenêtre plus petite que contenu*/
	/* content-visibility: auto; */
	/* contain: content; */
}

main>section>:not(header)+div:last-child,
main>section>article>div {
	/* contain: strict; */
}

.has-js [data-parallax],
.has-js body>nav {
	animation: opacity 1200ms 400ms;
	animation-fill-mode: both;
}

@keyframes opacity {
	from { opacity: var(--OpacityInvisible, 0); }
	to { opacity: var(--OpacityVisible, 1); }
}

.product h4 {
	display: none;
}

:root {
	--purple: #ac00b1;
	--purple: #641677;
	--purple: #7a0098;
}

main>section>section div header>* {
	margin-top: 0;
}

main>section>section section header {
	align-self: flex-end;
}

.sitename {
	font-weight: 900;
	text-transform: uppercase;
	font-size: .73125em;
	display: inline-block;
}

h1+p {
	font-weight: 700;
	margin-top: calc(var(--Row) * .25);
}

h1 .local {
	white-space: nowrap;
}

nav>ul>li:not(.is-complete)>a {
	background-color: var(--ltr-primary);
}

.chain .foreign:not(.placeholder)~article svg {
	fill: url('#gradient-local-foreign');
}

@media (orientation: landscape) {
	body {
		flex-wrap: wrap;
	}

}

body>footer {
	padding: var(--Row);
	padding-left: calc(var(--Row) * 4);
	flex: 0 0 100%;
	box-sizing: border-box;
}

@media (orientation: portrait) {
	body>footer {
		display: none;
	}
}

main {
	flex: 1 1 0%;
}

main>section>article~section aside {
	position: fixed;
	top: auto;
	bottom: calc(var(--Row) * 3);
	left: max(calc(100% - 120vh), calc(100% - 52vw));
	/* --Size: 1.25; */
	max-width: 30ch;
	z-index: 3;
}

main>section:not(.is-visible)>article~section aside {
	opacity: 0;
	pointer-events: none;
}

main>section>article~section>*,
main>section>section:only-of-type:not(:last-child) {
	max-width: 80ch;
}

main>section>figure {
	position: fixed;
	right: var(--Row);
	top: 50%;
	height: 0;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	--Size: .5;
}

main>section>figure>img {
	max-width: 40vw;
	max-height: 50vh;
	display: block;
}

main>section:not(.is-active)>figure {
	opacity: 0;
}

strong {
	background-color: var(--tr-purple);
	font-weight: 500;
}

mark {
	background-color: var(--yellow);
}

main>h2 {
	padding-bottom: 0;
}

main > section p > b:only-child {
	font-size: 1.3125em;
}

html {
	-moz-osx-font-smoothing: grayscale;
}

main > section aside > svg[class*="cartoon"] {
	height: calc(var(--Row) * 4);
	float: left;
	shape-outside: circle(55% at 50% 50%) padding-box;
	margin-bottom: 20px;
	margin-right: 20px;
	margin-top: -20px;
	margin-left: -60px;
	padding: 15px;
}
main > section aside > div {
	max-width: 30ch;
}

main > section aside {
	display: block;
}

.chain .link .amount {
	padding-bottom: calc(var(--Row) / 2);
	align-items: flex-end;
	text-align: right;
	justify-content: flex-end;
	position: relative;
}

.chain .amount::after {
	content: "Biens intrants";
	position: absolute;
	bottom: -.5em;
	font-size: 10px;
	right: 0;
	line-height: 1;
	padding-left: calc(var(--Row) / 2);
	background-color: white;
	text-transform: uppercase;
	white-space: nowrap;
	z-index: 1;
}

.chain .foreign.amount::after {
	top: -.75em;
	bottom: auto;
}

.chain .link .amount.foreign {
	padding-top: calc(var(--Row) / 2);
	padding-bottom: 0;
}

.chain .amount.paid::after {
	content: "Montant déboursé";
}

.chain .amount.value::after {
	content: "Valeur ajoutée";
}

.chain .goods-list>.product>section {
	flex-direction: row-reverse;
	align-content: flex-start;
}

link {
	display: none !important;
}

.chain article {
	text-align: right;
}

.chain h4 {
	width: 0;
	justify-content: flex-end;
}

.chain article h4 {
	height: calc(var(--Row) * .75);
}

.product>section {
	max-width: 500px;
}

.chain .agent:first-child article {
	align-items: flex-start;
}

.chain .good.arrow {
	margin: 0 calc(var(--Row) / 2);
	border-top-style: dotted;
	flex: 100% 1 1;
}

.chain h4>span {
	background-color: white;
	padding-left: calc(var(--Row) / 2);
}

.chain .agent:first-child h4 {
	width: auto;
}

.chain .agent:first-child h4>span {
	padding-left: 0;
	padding-right: calc(var(--Row) / 2);
}

.chain .agent:first-child .amount {
	justify-content: flex-start;
}

.chain .goods-list input {
	display: none;
}

.chain .goods-list section {
	padding-left: calc(var(--Row) / 2);
	margin-right: calc(-1 * var(--Row));
	padding-right: var(--Row);
	padding-bottom: calc(var(--Row) / 2);
	border-left: 1px solid currentColor;
	fill: currentColor;
}

.chain .goods-list section.local {
	border-bottom: 1px solid currentColor;
}

.chain .agent:not(:first-of-type)>div:last-child::after {
	content: "";
}

.chain .goods-list section.foreign {
	border-top: 1px solid currentColor;
	padding-bottom: 0px;
	padding-top: calc(var(--Row) / 2);
}

.chain article, .chain .product {
	align-items: flex-end;
}

.chain .product>section:not(:empty) {
	position: relative;
}

.chain .product>section:not(:empty):after {
	content: "•";
	position: absolute;
	left: 0;
	top: 0;
	text-align: center;
	display: block;
	line-height: 0;
	margin-left: -.28125em;
}

.chain section[class]:empty {
	border: none;
}

.chain .product>section.foreign:not(:empty):after {
	bottom: 0;
	top: auto;
}

/* Grille du diagramme --- */

.chain>div {
	display: grid;
	grid-auto-flow: dense;
	gap: var(--Row);
	max-width: max-content;
}

.chain>div>*,
.chain>div>*>div {
	display: contents;
}

.chain article, .chain .amount, .chain .placeholder,
.chain .goods-list section, .chain .product {
	grid-column-start: calc(var(--link-position));
}
.chain .goods-list section {
	grid-column-start: calc(var(--link-position) - 1);
}

/* Ordre des éléments de diagramme --- */

.chain .foreign,
.chain .agent:not(:first-of-type)>div:last-child::after {
	order: 1;
}

.chain article, .chain .product {
	order: 3;
}

.chain .local {
	order: 5;
}
 
.chain .value,
.chain .paid {
	order: 4;
}

/* ------ DIAGRAMME VERTICAL ---- */

.chain>div {
	grid-auto-flow: column dense;
}

.chain article, .chain .amount, .chain .placeholder,
.chain .goods-list section, .chain .product, .chain .unknown-link {
	grid-column-start: initial;
	grid-row-start: calc(var(--link-position));
}
.chain .goods-list section {
	grid-column-start: initial;
	grid-row-start: calc(var(--link-position) - 1);
}
/* Ordre des éléments de diagramme --- */

.chain .foreign,
.chain .agent:not(:first-of-type)>div:last-child::after {
	order: 4;
}

.chain article, .chain .product, .chain .unknown-link {
	order: 3;
}

.chain .local {
	order: 1;
}
 
.chain .value,
.chain .paid {
	order: 2;
}

.chain .goods-list section {
	border-top: 1px solid currentColor;
}

.chain .goods-list section.local {
	border-bottom: none;
}

.chain article, .chain .product {
	align-items: center;
}

.chain .product>section:not(:empty):after {
	left: auto;
	right: 0;
	margin-top: -.125em;
}

.chain h4 {
	width: auto;
}

.chain .product {
	flex-direction: column;
}

.chain .good.arrow {
	max-height: initial;
	border-left: var(--ArrowLine);
	border-left-style: dotted;
}

.chain .goods-list section.foreign:not(:empty) {
	border-right: 1px solid currentColor;
	border-left: none;
}

.chain .product > section.foreign:not(:empty)::after {
	top: 0;
	right: auto;
	left: 0;
	bottom: auto;
}

.chain .product .icon.beer {
	position: relative;
	left: -4%;
}

.chain .goods-list section {
	padding: var(--Row);
	padding-bottom: 0;
	max-width: 65px;
}

.chain .agent:not(:first-child)>div:only-child::before {
	content:"";
	order: 1;
	grid-column-end: span 2;
}

.chain .agent>div:only-child::after {
	content: "";
	order: 5;
}

.chain .agent:first-child article {
	align-items: center;
}
