.chain div:not([class])+.unknown-link hr {
	display: none; /* SALE — Faudrait l'enlever dans le XSLT */
}

main>section {
/* Cause un bug au défilement si fenêtre plus petite que contenu*/
	/* content-visibility: auto; */
	/* contain: content; */
}

main>section>:not(header)+div:last-child,
main>section>article>div {
	contain: strict;
}

body>nav {
	font-size: 0;
}

.has-js [data-parallax],
.has-js body>nav {
	animation: opacity 1200ms 400ms;
	animation-fill-mode: both;
}

@keyframes opacity {
	from { opacity: var(--OpacityInvisible, 0); }
	to { opacity: var(--OpacityVisible, 1); }
}

section[id]:not(.is-active) {
	opacity: 0;
	pointer-events: none;
}

.diagram>div {
	position: fixed;
	/* top: 40vh; */
}

.diagram .product h4 {
	display: none !important;
}

article.chain .product .icon {
    --IconHeight: calc(var(--Row) * 2 * var(--Size));
}

article.chain .agent .icon {
    --IconHeight: calc(var(--Row) * 2.5 * var(--Size));
}

div.grille {
	--DivItemBasis: calc((84ch - 100%) * 999);
}

.chain .icon:not(:last-child) {
	margin-top: initial !important;
}

.chain .good.arrow {
	/* --ArrowLine: initial; */
}

.chain .amount {
	--ScaleLevel: var(--Taller) !important;
}

.chain .variable.arrow {
	--ArrowLine: 2px dotted currentColor;
}

.chain .variable.arrow:only-of-type {
	--ArrowLine: 2px solid currentColor;
}
.chain * {
	flex-wrap: nowrap;
}

nav {
	opacity: 0 !important;
}

.diagram, .diagram>div {
	width: min(120vh, 52vw);
}


main>section {
	display: grid !important;
	grid-template-columns: 1fr auto;
	grid-template-rows: auto auto;
}

main>section>header {
	display: initial !important;
	margin-top: auto;
}

main>section>* {
	grid-column: 1;
}

main>section>article {
	grid-column: 2;
	grid-row: 1 / -1;
	margin-bottom: 0 !important;
}


main>h2 {
	scroll-snap-align: start;
}

main>section {
	scroll-snap-align: initial;
}

.diagram>div {
	display: grid !important;
	top: 0;
	bottom: 0;
	right: 0;
	grid-template: repeat(13, minmax(0, 1fr)) / repeat(11, minmax(0, 1fr));
}

.diagram>div>* {
	/* width: 0; */
	/* height: 0; */
	/* aspect-ratio: 1; */
	grid-row-end: span 3;
}

.diagram>div>section,
.diagram>div>.unknown-link {
	/* align-self: start !important; */
}

.diagram>div>div {
	/* align-self: start !important; */
}

.chain .unknown-link {
	justify-content: center !important;
}

.diagram>div>* {
	grid-row-start: calc(var(--link-position) + 1);
	grid-column-start: calc(var(--link-position) + 1);
}


.chain * {
	display: flex !important;
}

.chain>div>div[class] {
	flex-direction: column !important;
}

.diagram .variable.arrow {
	transform: rotate(40deg);
	transform-origin: center !important;
	display: none !important;
}

.diagram .variable.arrow {
	margin: var(--Row) 0 !important;
}

.diagram>div>div:last-of-type hr.arrow::after {
	content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:serif='http://www.serif.com/' width='28px' height='16px' viewBox='0 0 56 33' version='1.1' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:butt;stroke-miterlimit:1.5;'%3E%3Cpath d='M3.756,26.664l22.908,-22.908l24.9,24.899' style='fill:none;stroke:%23D5D5D2;stroke-width:8px;'/%3E%3C/svg%3E");	
	content: initial;
	top: -3px !important;
	left: 30% !important;
	position: relative;
}

html {
	/* scroll-snap-type: initial; */
	scroll-behavior: initial;
}

.chain .arrow:after {
    width: initial !important;
}
