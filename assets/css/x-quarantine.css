.chain div:not([class])+.unknown-link hr {
	display: none; /* SALE — Faudrait l'enlever dans le XSLT */
}

main>section {
/* Cause un bug au défilement si fenêtre plus petite que contenu*/
	/* content-visibility: auto; */
	/* contain: content; */
}

main>section>:not(header)+div:last-child,
main>section>article>div {
	/* contain: strict; */
}

.has-js [data-parallax],
.has-js body>nav {
	animation: opacity 1200ms 400ms;
	animation-fill-mode: both;
}

@keyframes opacity {
	from { opacity: var(--OpacityInvisible, 0); }
	to { opacity: var(--OpacityVisible, 1); }
}

.chain .variable.arrow {
	--ArrowLine: 2px dotted currentColor;
}

.chain .variable.arrow:only-of-type {
	--ArrowLine: 2px solid currentColor;
}

.diagram .variable.arrow {
	transform: rotate(40deg);
	transform-origin: center !important;
	display: none !important;
}

.diagram .variable.arrow {
	margin: var(--Row) 0 !important;
}

.diagram>div>div:last-of-type hr.arrow::after {
	content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:serif='http://www.serif.com/' width='28px' height='16px' viewBox='0 0 56 33' version='1.1' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:butt;stroke-miterlimit:1.5;'%3E%3Cpath d='M3.756,26.664l22.908,-22.908l24.9,24.899' style='fill:none;stroke:%23D5D5D2;stroke-width:8px;'/%3E%3C/svg%3E");	
	content: initial;
	top: -3px !important;
	left: 30% !important;
	position: relative;
}

.chain .arrow:after {
    width: initial !important;
}

.product h4 {
	display: none;
}

:root {
	--purple: #ac00b1;
	--purple: #641677;
	--purple: #7a0098;
}

main>section>section div header>* {
	margin-top: 0;
}

main>section>section section header {
	align-self: flex-end;
}

.sitename {
	font-weight: 900;
	text-transform: uppercase;
	font-size: .73125em;
	display: inline-block;
}

h1+p {
	font-weight: 700;
	margin-top: calc(var(--Row) * .25);
}

h1 .local {
	white-space: nowrap;
}

body {
}

/* main { */
/* 	align-items: flex-start; */
/* 	overflow-y: hidden; */
/* } */

nav a {
	/* outline: 1px solid red; */
}

nav>ul>li:not(.is-complete)>a {
	background-color: var(--ltr-primary);
}


.chain .product .icon {
	/* --IconHeight: calc(var(--Row) * 1.25 * var(--Size)); */
	/* background-color: var(--lt-primary); */
}
.chain .good.arrow {
	/* flex-grow: 0; */
}

/* .chain .good.arrow, */
/* .chain .link .amount { */
/* 	margin: 0; */
/* } */



.chain .foreign:not(.placeholder)~article svg {
	fill: url('#gradient-local-foreign');
}

@media (orientation: landscape) {
	body {
		flex-wrap: wrap;
	}

}

body>footer {
	padding: var(--Row);
	padding-left: calc(var(--Row) * 4);
	flex: 0 0 100%;
	box-sizing: border-box;
}

@media (orientation: portrait) {
	body>footer {
		display: none;
	}
}

main {
	flex: 1 1 0%;
}

main>section>article~section aside {
	position: fixed;
	top: auto;
	bottom: calc(var(--Row) * 3);
	left: max(calc(100% - 120vh), calc(100% - 52vw));
	/* --Size: 1.25; */
	max-width: 30ch;
	z-index: 3;
}

main>section:not(.is-visible)>article~section aside {
	opacity: 0;
	pointer-events: none;
}

main>section>article~section>*,
main>section>section:only-of-type:not(:last-child) {
	max-width: 80ch;
}

main>section>figure {
	position: fixed;
	right: var(--Row);
	top: 50%;
	height: 0;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	--Size: .5;
}

main>section>figure>img {
	max-width: 40vw;
	max-height: 50vh;
	display: block;
}

main>section:not(.is-active)>figure {
	opacity: 0;
}

strong {
	background-color: var(--tr-purple);
	font-weight: 500;
}

mark {
	background-color: var(--yellow);
}

main>h2 {
	padding-bottom: 0;
}

main > section p > b:only-child {
	font-size: 1.3125em;
}

/* :root { */
/* 	--blue: #63B6FF; */
/* 	--red: #FF8181; */
/* 	--beige: #1c1a10; */
/* 	--lt-beige: #1c1a10; */
/* 	--dk-beige: #1c1a10; */
/* 	--lt-purple: #762484; */
/* 	--purple: #f6bfff; */
/* 	--brown: #A2A19B; */
/* 	--ltst-primary: #26262b; */
/* 	--ltr-primary: #151519; */
/* 	--lt-red: #8e083b; */
/* 	--yellow: #736C00; */

/* 	--ColorBg: white; */
/* 	--ColorText: var(--indigo); */
/* 	--ColorLocal: var(--blue); */
/* 	--ColorForeign: var(--red); */
/* 	--ColorAccent: var(--yellow); */
/* 	--ColorDkAccent: var(--dk-yellow); */
	

/* 	/1* --ColorSupport: var(--lt-purple); *1/ */
/* 	--ColorBg: #333; */
/* 	--ColorText: #ddd; */
/* } */

/* nav a:before { */
/* 	filter: invert(1); */
/* } */

html {
	-moz-osx-font-smoothing: grayscale;
}

main > section aside > svg[class*="cartoon"] {
	height: calc(var(--Row) * 4);
	float: left;
	shape-outside: circle(55% at 50% 50%) padding-box;
	margin-bottom: 20px;
	margin-right: 20px;
	margin-top: -20px;
	margin-left: -60px;
	padding: 15px;
}
main > section aside > div {
	max-width: 30ch;
}

main > section aside {
	display: block;
}

.chain>div>*,
.chain>div>*>div {
	display: contents;
}

.chain .arrow {
	/* display: none; */
}

.chain .local {
	order: 5;
	/* grid-row-start: 5; */
}

.chain .value,
.chain .paid {
	order: 4;
	/* grid-row-start: 4; */
}

.chain .foreign {
	order: 1;
	/* grid-row-start: 1; */
}

.chain .goods-list section {
	/* grid-column-end: span 2; */
	width: auto;
	/* min-width: 100%; */
	margin-left: var(--Row);
	padding-left: calc(var(--Row) / 2);
	margin-right: calc(-1 * var(--Row));
	padding-right: var(--Row);
	padding-bottom: 10px;
	border-left: 1px solid currentColor;
}

.chain .goods-list section.local {
	order: 5;
	/* grid-row-start: 5; */
	fill: var(--ColorLocal);
	border-bottom: 1px solid currentColor;
}

.chain .agent:not(:first-of-type)>div:last-child::after {
	content: "";
	order: 1;
}
.chain .goods-list section.foreign {
	order: 1;
	/* grid-row-start: 1; */
	fill: var(--ColorForeign);
	border-top: 1px solid currentColor;
	padding-bottom: 0px;
	padding-top: 10px;
}

.chain .goods-list section.value {
	order: 4;
	border-bottom: 1px solid currentColor;
	/* grid-row-start: 4; */
}

.chain article, .chain .product {
	order: 3;
	align-items: flex-end;
	/* grid-row-start: 3; */
}
.chain article, .chain .amount, .chain .placeholder,
.chain .goods-list section, .chain .product {
	grid-column-start: calc(var(--link-position));
}
.chain .goods-list section {
	grid-column-start: calc(var(--link-position) - 1);
}

.chain>div {
	--SecurityRowCount: 0;
	--SecurityColCount: 0;
	grid-template-rows: auto;
	grid-template-columns: auto;
	grid-auto-flow: dense;
	align-items: initial;
	gap: var(--Row);
	max-width: max-content;
}

.chain article:not(:first-child):last-child::after, .chain article:not(:last-child):first-child::before {
	content: initial;
}

.chain .goods-list>.product>section {
	/* direction: rtl; */
}

.chain .goods-list>.product>section>* {
	/* direction: initial; */
}

.chain section > div > * + *, .chain article:not(:first-child):last-child::after, .chain article:not(:last-child):first-child::before {
	margin-top: 0;
}

main > section > .diagram > div {
	height: max-content;
	margin: auto;
}

.chain .link .amount {
	margin: 0;
	padding-bottom: 10px;
	align-items: flex-end;
	text-align: right;
	justify-content: flex-end;
}

.chain .amount::after {
	content: "Biens intrants";
	position: absolute;
	bottom: -.5em;
	font-size: 10px;
	right: 0;
	line-height: 1;
	padding-left: 10px;
	background-color: white;
	max-width: max-content;
	text-transform: uppercase;
	white-space: nowrap;
	z-index: 1;
	/* text-align: right; */
}

.chain .foreign.amount::after {
	top: -.75em;
	bottom: auto;
}

.chain .link .amount.foreign {
	padding-top: 10px;
	padding-bottom: 0;
}

.chain .amount.paid::after {
	content: "Montant déboursé";
}

.chain .amount::before {
	content: "";
	position: absolute;
	bottom: 0;
	width: 100%;
	left: 0;
	right: 0;
	/* border-bottom: 1px solid currentColor; */
}

.chain .amount.value::after {
	content: "Valeur ajoutée";
}

.chain .goods-list>.product>section {
	align-items: end;
	align-content: end;
	width: auto;
	flex-direction: row-reverse;
}

link {
	display: none !important;
}

.chain section[class]:empty {
	border: none;
}

.chain * {
	justify-content: flex-end;
}

.chain article {
	text-align: right;
	align-items: flex-end;
	/* max-width:max-content; */
}

.chain h4 {
	width: 0;
	justify-content: flex-end;
}

.chain article {
	/* padding: 10px; */
}

.chain article > :first-child {
	margin-top: initial;
}

.chain article > :last-child {
	margin-bottom: initial;
}
.chain article h4 {
	height: calc(var(--Row) * .75);
}
.chain article {
	/* white-space: nowrap; */
}

.product article {
	/* margin-bottom: 2em; */
	margin-top: auto;
}

.product>section {
	max-width: 500px;
}

.chain>div>section:first-child * {
	text-align: left;
}

.chain * {
	justify-content: initial;
	align-items: initial;
}

.chain .agent:first-child article {
	align-items: flex-start;
}

.chain .agent:first-child article * {
	justify-content: flex-start;
}

.chain .agent:first-child .amount::after {
	right: auto;
	left: 0;
}

.chain .good.arrow {
	margin: 0 calc(var(--Row) / 2);
	border-top-style: dotted;
	min-width: 100%;
}

.chain h4>span {
	background-color: white;
	padding-left: 10px;
}
.chain .agent:first-child h4 {
	width: auto;
}
.chain .agent:first-child h4>span {
	padding-left: 0;
	padding-right: 10px;
}

.chain .agent:first-child .amount {
	justify-content: flex-start;
}

.chain .goods-list input {
	display: none;
}

.chain .product>section:not(:empty):after {
	content: "•";
	position: absolute;
	left: 0;
	top: 0;
	text-align: center;
	display: block;
	line-height: 0;
	margin-left: -.28125em;
}

.chain .product>section.foreign:not(:empty):after {
	bottom: 0;
	top: auto;
}
